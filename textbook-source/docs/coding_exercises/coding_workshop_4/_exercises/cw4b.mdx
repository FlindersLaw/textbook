import {DisplayGlossaryItem} from '@site/src/components';
import {DisplayImage} from '@site/src/components';
import Ref from './cw4b_references.mdx';

export const title = 'Exercise 4b'
export const video = <Ref />

## Background
The code for this exercise is supplied for you below.  You should copy this code into your Playground
so you can modify it according to this exercise.

This code is very similar to the code in [Exercise 4a](cw4a), the difference being
that we are using a [`DAList`](https://docassemble.org/docs/objects.html#DAList) instead of
a regular Python list.

Note that we need an `objects` block to declare our `DAList` and our <DisplayGlossaryItem item='codeblock' />
looks quite different.  Line 24 is the first line in our code block and it clears any items in `display_list`.
We need to do this as Docassemble sometimes runs our code block more than once as it executes our app
(this is called [**idempotence**](/docs/textbook/chapter_03/00-40#idempotence)).

Lines 27 to 35 add the items to our list.  In Exercise 4a we defined the list and its elements all in one
go.  With a `DAList` the definition happens in the `objects` block so we need to add our elements to our
already-defined list.  That's what the `append()` method does.

Finally, line 38 tells Docassemble that we have gathered all the elements we need into `display_list`
and we don't want to add any more.  Gathering is discussed more in [this case study](/docs/textbook/chapter_06/filtering/00-50#bringing-it-all-together)

:::tip
You might want to consider setting up a new
[Playground Project](/docs/textbook/chapter_01/00-30#1-navbar-and-playground-menu)
for these coding exercises.
:::

:::note
A `DAList` is part of Docassemble.  Basically, it's a Python list on steroids.
`DAList`s come with extra functionality over a Python list.  One of these you can see
if you run the test code as it is.  The list of names is displayed as a sentence with each
name separated by a comma and the last name preceded with an 'and'.  Compare this to
the Python list displayed in [Exercise A](cw4a) which was very much the raw Python
list, including the square brackets.

As a general rule when using lists we should use `DAList`s and when using dictionaries
we should use `DADict`s.
:::

## Your Task
Like in Exercise 4a you must modify the code to display the contents of `display_list` as
a bullet list.  However, for this exercise you must only display entries that contain the 
letter 'H' in them.

:::tip hint
1. Remember that you should test for both upper-case and lower-case 'H'.
1. You might want to consider using a [logical 'or' test](/docs/textbook/chapter_04/00-60).
:::

Replace the code on line 14 with your code.  Your code should be about five lines long. You will
need to use the same `%for` loop you wrote in Exercise 4a but embed an additional `%if` statement
in it.

## Code
Copy this code into your playground as a starting point for this exercise.

```yml showLineNumbers
# Coding Exercise 4b
#
# Introducing Iteration with DAList()
---
objects:
  - display_list: DAList.using(auto_gather=False)
---
mandatory: True
question: Coding Workshop 4b
subquestion: |
  Display only the names in `display_list` that
  contain the letter 'H' in them.

  ${display_list}

buttons:
  - Exit: exit
---
# This code block defines the list with the 
# items to display
code: |
  # Always clear our the list before you start work
  # on it in a code block
  display_list.clear()

  # Add the data
  display_list.append('Ida Noe')
  display_list.append('Hugo First'),
  display_list.append('Moda Lawn'),
  display_list.append('Kate Jupp'),
  display_list.append('Ayfor Gott'),
  display_list.append('Justin Thyme'),
  display_list.append('Ray Member'),
  display_list.append('Studie Harde'),
  display_list.append('Slacke Hearse')

  # Finish by setting gathered to True
  display_list.gathered = True
---
:::