"use strict";(self.webpackChunktextbook_source=self.webpackChunktextbook_source||[]).push([[3786],{2224:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>c,contentTitle:()=>d,default:()=>u,frontMatter:()=>r,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"textbook/chapter_02/00-50","title":"Hello World 5 - Introducing Jinja","description":"So far, we\'ve seen how Docassemble can take input from a user, by way of","source":"@site/docs/textbook/chapter_02/00-50.mdx","sourceDirName":"textbook/chapter_02","slug":"/textbook/chapter_02/00-50","permalink":"/textbook/docs/textbook/chapter_02/00-50","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Hello World 5 - Introducing Jinja"},"sidebar":"textbookSidebar","previous":{"title":"Hello World 4 - More Mako, Multiple Questions, Tables","permalink":"/textbook/docs/textbook/chapter_02/00-42"},"next":{"title":"Vital Statistics - A More Sophisticated Example","permalink":"/textbook/docs/textbook/chapter_02/00-60"}}');var a=n(4848),s=n(8453),l=n(8958),i=n(1428);const r={title:"Hello World 5 - Introducing Jinja"},d=void 0,c={},h=[{value:"A Simple Example",id:"a-simple-example",level:2},{value:"Adding a Word Document to Your Docassemble App",id:"adding-a-word-document-to-your-docassemble-app",level:2},{value:"Upload the Document to the Playground",id:"upload-the-document-to-the-playground",level:3},{value:"To upload your document:",id:"to-upload-your-document",level:4},{value:"Point Your App to the Uploaded Document",id:"point-your-app-to-the-uploaded-document",level:3},{value:"Running an App with an attachment",id:"running-an-app-with-an-attachment",level:2}];function p(e){const o={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return i||m("Components",!1),i.DisplayDAButtons||m("Components.DisplayDAButtons",!0),i.DisplayGlossaryItem||m("Components.DisplayGlossaryItem",!0),i.DisplayImage||m("Components.DisplayImage",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.p,{children:"So far, we've seen how Docassemble can take input from a user, by way of\nquestion blocks, and display output on the screen, using mandatory question\nblocks and Markdown.  Docassemble can also prepare Word documents and PDF\ndocuments.  Let's explore this."}),"\n",(0,a.jsxs)(o.p,{children:["Up to now we have constructed an output screen using Markdown in a mandatory\nquestion block.  When we want to input the value of a variable we\ninsert ",(0,a.jsx)(i.DisplayGlossaryItem,{item:"mako",upper:!0})," into our Markdown.\nWith word documents we can do something similar.  We can prepare a template\nWord document with the text and styling and images that we want.  When we\nwant to insert the value of a variable we\nuse ",(0,a.jsx)(i.DisplayGlossaryItem,{item:"jinja",upper:!0})," instead of Mako.\nThat's very useful for us as we can prepare printable high-quality documents\nwith corporate logos and styles that contain information from our app."]}),"\n",(0,a.jsx)(o.p,{children:"Jinja works in a similar way to Mako but the syntax is a little different.\nWhere Mako looks like this:"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{children:"${ variable_name }\n"})}),"\n",(0,a.jsx)(o.p,{children:"Jinja looks like this:"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{children:"{{ variable_name }}\n"})}),"\n",(0,a.jsxs)(o.p,{children:["Just like Mako, what's inside Jinja double-braces is evaluated as\na ",(0,a.jsx)(i.DisplayGlossaryItem,{item:"python",upper:!0})," expression.  So,\nif we look at the Mako from ",(0,a.jsx)(o.a,{href:"./00-42#line-8",children:"Hello World 4"}),","]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{children:"${ MJFsalutation + ' ' + MJFlastname }\n"})}),"\n",(0,a.jsx)(o.p,{children:"that line could be represented as follows as Jinja in a Word document."}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{children:"{{ MJFsalutation + ' ' + MJFlastname }}\n"})}),"\n",(0,a.jsx)(o.h2,{id:"a-simple-example",children:"A Simple Example"}),"\n",(0,a.jsxs)(o.p,{children:["Download and open this ",(0,a.jsx)(o.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(5256).A+"",children:"Word document"}),".\nLet's take a look at it."]}),"\n",(0,a.jsx)(i.DisplayImage,{imageURL:"/img/textbook/chapter_02/hello_world5-1.png"}),"\n",(0,a.jsx)(o.p,{children:"Note how the first two Jinja variables are in bold.  We've done this by\nsimply bolding the text in Word, as we would any other text.  We control\ntext formatting using Word's usual formatting."}),"\n",(0,a.jsx)(o.p,{children:"We can, for example, change the colour of the Jina on the third line to red\nby using Word's usual formatting. No Markdown required!"}),"\n",(0,a.jsx)(i.DisplayImage,{imageURL:"/img/textbook/chapter_02/hello_world5-2.png"}),"\n",(0,a.jsxs)(o.p,{children:["Make change the colour of the third line to red and save the word document.",(0,a.jsx)(o.br,{}),"\n","Then, let's upload it to Docassemble."]}),"\n",(0,a.jsx)(o.h2,{id:"adding-a-word-document-to-your-docassemble-app",children:"Adding a Word Document to Your Docassemble App"}),"\n",(0,a.jsx)(o.p,{children:"There are two parts to adding a Word document to a Docassemble app:"}),"\n",(0,a.jsxs)(o.ol,{children:["\n",(0,a.jsx)(o.li,{children:"upload the document into the Playground; and"}),"\n",(0,a.jsx)(o.li,{children:"point your app to the document."}),"\n"]}),"\n",(0,a.jsx)(o.h3,{id:"upload-the-document-to-the-playground",children:"Upload the Document to the Playground"}),"\n",(0,a.jsxs)(o.admonition,{type:"caution",children:[(0,a.jsxs)(o.p,{children:["Before we upload, it is very important to be aware that Docassemble ",(0,a.jsx)(o.strong,{children:"does not"}),"\nlike spaces in document file names.  If you downloaded the Word document as\n",(0,a.jsx)(o.a,{href:"#a-simple-example",children:"instructed above"})," you probably saved it as\n",(0,a.jsx)(o.code,{children:"First Docassemble Template.docx"}),".  We need to get rid of the spaces in\nthe document name before we upload it."]}),(0,a.jsxs)(o.p,{children:["Best practice is to change spaces to underscores (",(0,a.jsx)(o.code,{children:"_"}),").  So, rename\n",(0,a.jsx)(o.code,{children:"First Docassemble Template.docx"})," to ",(0,a.jsx)(o.code,{children:"First_Docassemble_Template.docx"}),"."]}),(0,a.jsx)(o.p,{children:"Now we're ready to upload"})]}),"\n",(0,a.jsxs)(o.p,{children:["Word documents must be stored in the ",(0,a.jsx)(o.strong,{children:"Templates"})," folder of your app."]}),"\n",(0,a.jsx)(i.DisplayImage,{imageURL:"/img/textbook/chapter_02/hello_world5-3.png"}),"\n",(0,a.jsx)(o.h4,{id:"to-upload-your-document",children:"To upload your document:"}),"\n",(0,a.jsxs)(o.ol,{children:["\n",(0,a.jsx)(o.li,{children:"go to the Templates folder;"}),"\n",(0,a.jsx)(o.li,{children:"click on Browse and select your Word document; and"}),"\n",(0,a.jsxs)(o.li,{children:["click on ",(0,a.jsx)(i.DisplayDAButtons,{button:l.K1,button_text:"Upload"}),"."]}),"\n"]}),"\n",(0,a.jsx)(i.DisplayImage,{imageURL:"/img/textbook/chapter_02/hello_world5-4.png"}),"\n",(0,a.jsx)(o.p,{children:"The document will be uploaded and appear in your 'Existing template files' list."}),"\n",(0,a.jsx)(i.DisplayImage,{imageURL:"/img/textbook/chapter_02/hello_world5-5.png"}),"\n",(0,a.jsx)(o.admonition,{type:"note",children:(0,a.jsxs)(o.p,{children:["It's not clear from the screenshot but the file has actually been uploaded\nas ",(0,a.jsx)(o.code,{children:"First_Docassemble_Template.docx"})," and not ",(0,a.jsx)(o.code,{children:"First Docassemble Template.docx"}),".\nThe hyperlink obscures the underscores but they are there."]})}),"\n",(0,a.jsxs)(o.p,{children:["Your Word file is uploaded. Click ",(0,a.jsx)(o.code,{children:"<Back"})," to go to your Playground."]}),"\n",(0,a.jsxs)(o.admonition,{type:"info",children:[(0,a.jsx)(o.p,{children:"You cannot edit a Word file that has been uploaded into the Templates folder.\nIf you click on the file in the 'Existng template files' list Docassemble will\nallow you to download a copy of the file."}),(0,a.jsx)(o.p,{children:"If you want to make changes to your template file you need to go through a cycle\nof:"}),(0,a.jsxs)(o.ol,{children:["\n",(0,a.jsx)(o.li,{children:"download the file from the 'Existing template files' list;"}),"\n",(0,a.jsx)(o.li,{children:"save the word document to your computer;"}),"\n",(0,a.jsx)(o.li,{children:"edit the file and save your changes; and"}),"\n",(0,a.jsx)(o.li,{children:"upload the saved file back into the Templates folder."}),"\n"]}),(0,a.jsx)(o.p,{children:"When you upload your new file Docassemble will overwrite your existing uploaded\nfile (provided the files have the same name of course!)."})]}),"\n",(0,a.jsx)(o.h3,{id:"point-your-app-to-the-uploaded-document",children:"Point Your App to the Uploaded Document"}),"\n",(0,a.jsxs)(o.p,{children:["Docassemble uses an ",(0,a.jsx)(o.a,{href:"https://docassemble.org/docs/documents.html#attachment",children:(0,a.jsx)(o.code,{children:"attachment"})})," key to\nconnect an app to a Word document."]}),"\n",(0,a.jsxs)(o.p,{children:["We have an example of this below.  This example is essentially the code\nin ",(0,a.jsx)(o.a,{href:"./00-42#our-code",children:"Hello World 4"})," but with the ",(0,a.jsx)(o.code,{children:"attachment:"})," specifier added.\nA copy of this code is also available in ",(0,a.jsx)(o.code,{children:"C1_05_hello_world.yml"})," in the\nteaching code repository.  Look at lines 26 and 27 of the code."]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-yaml",children:"---\n# My first Docassemble program\nmandatory: True\nquestion: Hello World!\nsubquestion: |\n  ### Welcome to Docassemble!\n\n  Dear ${ MJFsalutation + ' ' + MJFlastname },\n\n  This is a quick introduction to Markdown.\n\n  Two lines for a line break\n  because a single line doesn't break at all.\n\n  - Here's a list\n  - with some items\n  - in it\n\n  **Here's some bold text** and *text in italics*.\n\n  Column1|Column2\n  -------|-------\n  Salutation|${ MJFsalutation }\n  First Name|${ MJFfirstname }\n  Last Name|${ MJFlastname }\nattachment:\n  docx template file: First_Docassemble_Template.docx\nbuttons:\n  - I'm done: exit\n    url: https://flinders.edu.au\n  - Do it again: restart\n---\nquestion: Name\nfields:\n  - Salutation: MJFsalutation\n    choices:\n      - Dr\n      - Mr\n      - Mrs\n      - Ms\n  - First Name: MJFfirstname\n  - Last Name: MJFlastname\n---\n"})}),"\n",(0,a.jsx)(o.p,{children:"This is enough to link our document to our app."}),"\n",(0,a.jsx)(o.h2,{id:"running-an-app-with-an-attachment",children:"Running an App with an attachment"}),"\n",(0,a.jsx)(o.p,{children:"When an attachment is added to a Docassemble app Docassemble will display\nthat attachment as part of the question block in which the attachment is\ndeclared."}),"\n",(0,a.jsxs)(o.p,{children:["You will see from our code that our question block starts at line 2 (next\nline below the ",(0,a.jsx)(o.code,{children:"---"}),") and finishes at line 32 (line before ",(0,a.jsx)(o.code,{children:"---"}),").  That\nquestion block contains our ",(0,a.jsx)(o.code,{children:"attachment"})," on lines 26 and 27.  So, Docassemble\nwill display our file when it displays this question block."]}),"\n",(0,a.jsx)(o.p,{children:"If you run the app you will see a final screen that looks something like this."}),"\n",(0,a.jsx)(i.DisplayImage,{imageURL:"/img/textbook/chapter_02/hello_world5-6.png"}),"\n",(0,a.jsx)(o.p,{children:"Additional content has been added below our exit and restart buttons.  This\ncontent allows a user to download the Word document, or the Word document as\na PDF.  It also allows the user to email the document to themselves."}),"\n",(0,a.jsx)(o.p,{children:"If we open the Word document we will see that our Jinja has been replaced with\nthe variables from our app.  Note also that our formatting (including the\nred text!) has been preserved."}),"\n",(0,a.jsx)(i.DisplayImage,{imageURL:"/img/textbook/chapter_02/hello_world5-7.png"}),"\n",(0,a.jsxs)(o.admonition,{type:"note",children:[(0,a.jsxs)(o.p,{children:["You may not want your app users to download a Word ",(0,a.jsx)(o.em,{children:"and"})," a PDF document.",(0,a.jsx)(o.br,{}),"\n","Usually, you want users only to download a PDF or a Word version."]}),(0,a.jsxs)(o.p,{children:["The ",(0,a.jsx)(o.code,{children:"attachment"})," specifier allows you to do this.  In fact, there's quite a\nlot you can do with ",(0,a.jsx)(o.code,{children:"attachment"}),"s.  Get familiar with its capabilities\nin the ",(0,a.jsx)(o.a,{href:"https://docassemble.org/docs/documents.html#attachment",children:"Docassemble manual"}),"."]})]})]})}function u(e={}){const{wrapper:o}={...(0,s.R)(),...e.components};return o?(0,a.jsx)(o,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}function m(e,o){throw new Error("Expected "+(o?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},5256:(e,o,n)=>{n.d(o,{A:()=>t});const t=n.p+"assets/files/First_Docassemble_Template-e93ccc7f746291565c7d7eaadd3ae495.docx"}}]);